all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, fill)  # Set colour, not fill# Set colour, not fill
)
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, fill)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, fill)  # Set colour, not fill# Set colour, not fill
)
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, fill)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, fill)  # Set colour, not fill# Set colour, not fill
)
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", fill),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", "#333333", fill)  # Set colour, not fill# Set colour, not fill
)
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", "#333333", colour)  # Set colour, not fill# Set colour, not fill
)
sectors_colors
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", "#333333", colour)  # Set colour, not fill# Set colour, not fill
)
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", "#333333", colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmlCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "#333333", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker) |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "darkgoldenrod", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
df <-
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("NTSCLBE_NA", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker)
df |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "NTSCLBE_NA", "NTSCLBE", sector),
sector_abbrev = ifelse(ticker == "NTSCLBE_NA", "SmCp", sector_abbrev),
colour = ifelse(ticker == "NTSCLBE_NA", "darkgoldenrod", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
df
ggcorrplot::cor_pmat()
?ggcorrplot::cor_pmat()
ggcorrplot(cor(mtcars),
type = "lower",
insig = "blank",
lab = TRUE,
digits = 3
)
mtcars
ggcorrplot::ggcorrplot()
df
df |> pivot_wider(names_from = ticker, values_from = trr)
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date)
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> corr()
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor()
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot()
df |> View()
df |> group_by(ticker) |> summarise(n = n())
df <-
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("M1WOSC", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker)
df |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "M1WOSC", "M1WOSC", sector),
sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
colour = ifelse(ticker == "M1WOSC", "darkgoldenrod", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
df <-
all_trr_eur_long |>
filter(str_detect(ticker, "MXWO0") | ticker %in% c("M1WOSC", "MSDEWIN")) |>
filter(!is.na(trr), date <= lastdate) |>
group_by(ticker)
df |>
summarise(risk = sqrt(12) * sd(trr), return = prod(1 + trr)^(12 / n()) - 1) |>
left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
left_join(sectors_colors, by = c("sector" = "ticker")) |>
rename(colour = fill) |>
mutate(
sector = ifelse(ticker == "M1WOSC", "M1WOSC", sector),
sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
colour = ifelse(ticker == "M1WOSC", "darkgoldenrod", colour),
sector = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev),
colour = ifelse(ticker == "MSDEWIN", bmgray, colour)  # Set colour, not fill# Set colour, not fill
) |>
ggplot(aes(x = risk, y = return, colour = colour)) +  # Use colour column
geom_point(size = 5) +
scale_colour_identity() +  # Use hex codes directly
geom_label_repel(aes(label = sector_abbrev)) +
theme_minimal() +
theme(legend.position = "none") +
scale_y_continuous(labels = percent_format(accuracy = 1), limits = c(NA, 0.3)) +
scale_x_continuous(labels = percent_format(accuracy = 1), limits = c(0, 0.3)) +
ggtitle(str_c("MSCI sectors risk/return, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
df |> group_by(ticker) |> summarise(n = n())
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot()
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 3))
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot(type = "lower")
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot(type = "lower", insig = "blank")
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 3)
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date) |> cor() |> ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 2)
df
df |> pivot_wider(names_from = ticker, values_from = trr) |> select(-date)
df |> mutate(sector_abbrev = abbreviate(sector))
df
df |> mutate(sector_abbrev = abbreviate(ticker))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(ticker))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> select(sector_abbrev, trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbr) |> select(sector_abbrev, trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr) |> cor()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(sector_abbrev, trr, date)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date) |> cor()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date) |> cor() |> ggcorrplot()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN")) |>  cor() |> ggcorrplot()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>  cor() |> ggcorrplot()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN")))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)|>  cor() |> ggcorrplot()
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)|>  cor() |> ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 3)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>  mutate(sector_abbrev = abbreviate(sector)) |> mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev), sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |> group_by(sector_abbrev) |> select(date, sector_abbrev, trr) |> mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |> pivot_wider(names_from = sector_abbrev, values_from = trr) |> select(-date)|>  cor() |> ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1)
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1)
#![](logo.png){width=100%}
options(OutDec = ".") #geen comma's
#library(quantmod)
library(png)
#for charting
library(tibbletime) #rollify
library(slider) #rolling statistics
library(tidyquant) # xts, zoo, lubridate, performance_analytics, quantmod, TTR
library(tidyverse) # ggplot2, purrr, dplyr, tidyr, readr, tibble, stringr
library(lubridate) #datumfuncties
library(readxl) # xlsx inlezen
library(RColorBrewer) #kleuren
library(directlabels) #voor labels aan uiteinde van lijnen, geom_dl
library(ggrepel) #label repel
library(scales) #label_percent
library(broom) #tidy
library(scales) #pretty breaks
library(quarto)
library(gt) #tabellen
library(gtExtras) #tabellen
library(gridExtra) #meerdere grafieken op een pagina
library(paletteer)
library(rsconnect)
library(janitor)
library(ggcorrplot)
# Suppress summarise info dplyr
options(dplyr.summarise.inform = FALSE)
options(knitr.table.format = "html")
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1) +
ggtitle(str_c("MSCI sectors correlaties, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y")))
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1) +
ggtitle(str_c("MSCI sectors correlaties, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y"))) +
theme(legend.position = "none")
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1) +
ggtitle(str_c("MSCI sectors en small caps correlaties, van ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y"))) +
theme(legend.position = "none")
df |> left_join(sector_levels_RD_ticker_name, by = "ticker") |>
mutate(sector_abbrev = abbreviate(sector)) |>
mutate(sector_abbrev = ifelse(ticker == "M1WOSC", "SmCp", sector_abbrev),
sector_abbrev = ifelse(ticker == "MSDEWIN", "MSDEWIN", sector_abbrev)) |>
group_by(sector_abbrev) |>
select(date, sector_abbrev, trr) |>
mutate(sector_abbrev = factor(sector_abbrev, levels = c(abbreviate(sectors_colors$ticker), "SmCp", "MSDEWIN"))) |>
pivot_wider(names_from = sector_abbrev, values_from = trr) |>
select(-date)|>
cor() |>
ggcorrplot(type = "lower", insig = "blank", lab = TRUE, digits = 1) +
ggtitle(str_c("MSCI sectors en small caps correlaties, \nvan ", format(start_date_attr, "%d-%b-%y"), " tot ", format(lastdate, "%d-%b-%y"))) +
theme(legend.position = "none")
all_trr_eur_long
all_trr_eur_long |> filter(date == min(date))
all_prices_eur_long |> filter(date == min(date))
all_prices_eur_long |> ungroup() |> filter(date == min(date))
other_chart_data
styles_chart_data_incl
sector_chart_data_incl_excl
shiny::runApp('~/Library/CloudStorage/OneDrive-Personal/R Projects/Vergelijkingssites/ewq')
library(shiny)
library(httr)
library(jsonlite)
library(DT)
library(stringr)
library(tidyverse)
library(bslib)
library(janitor)
library(shinyjs)
library(shinycssloaders)
Sys.getenv("OPENAI_API_KEY")
runApp('~/Library/CloudStorage/OneDrive-Personal/R Projects/Vergelijkingssites/ewq')
?showPageSpinner
??showPageSpinner
